<% model_class = Result %>

<div class="page-header">
  <h1>Próxima Partida:</h1>
  <ul class="nav nav-tabs">
    <li><%= image_tag(@result.match.team1.flag) %> x <%= image_tag(@result.match.team2.flag) %></li>
    <li class="span">&nbsp;</li>
    <li>
      <span>Data: <strong><%= l @result.match.date, :format => :short %></strong></span>
      <br>
      <span>Local: <strong><%= @result.match.locale %></strong></span> 
    </li>
  </ul>
</div>

<%= form_for @result, :html => { :class => 'form-vertical' } do |f| %>
  <div class="control-group">
    <%= image_tag(@result.match.team1.flag) %>
    <%= f.hidden_field :match_id, :value => @result.match.id %>
    <%= f.text_field :result1, :class => 'input-mini match' %>
    <span>X</span>
    <%= f.text_field :result2, :class => 'input-mini match' %>
    <%= image_tag(@result.match.team2.flag) %>
  </div>

  <div class="form-actions">
    <%= f.submit "Palpitar", :class => 'btn btn-primary' %>
  </div>

<% end %>

<h1>Sujestão</h1>
  <table class="table table-striped">
  <!--<thead>
    <tr>
      <th>Data e Horário</th>
      <th>Local</th>
      <th></th>
      <th></th>
      <th>Jogo</th>
      <th></th>
      <th></th>
    </tr>
  </thead>-->
  <tbody>
    <% @all_matches.each do |match| %>
      <tr>
        <%= form_for Result.new, :html => { :onsubmit => "return FormValidate(this);" } do |f| %>
          <%= f.hidden_field :match_id, :value => match.id %>
          <td class='span3'><%= l match.date, :format => :short %></td>
          <!--<td><%= match.locale %></td>-->
          <td class='span2'><%= image_tag(match.team1.flag) %></td>
          <td class='span2'><%= f.text_field :result1, :class => 'input-mini match', :title =>"Digite aqui seu Palpite!" %></td>
          <td class='span2'><%= match.team1.name %><br>
            <span class="badge badge-info" title="Resultado da partida">0</span>
          </td>
          <td class='span2'><i class="icon-asterisk"></i></td>
          <td class='span2'><%= match.team2.name %><br>
            <span class="badge badge-info" title="Resultado da partida">0</span>
          </td>
          <td class='span2'><%= f.text_field :result2, :class => 'input-mini match', :title =>"Digite aqui seu Palpite!"%></td>
          <td class='span2'><%= image_tag(match.team2.flag) %></td>
          <td class='span2'><%= f.submit "Palpitar", :class => 'btn btn-primary' %></td>
        <% end %>
      </tr>
      
    <% end %>
  </tbody>
</table>

<script type="text/javascript">
  function IsStringEmpty(str)
  {
    if(str && str!='') 
      return false;
    else
      return true;
  }
  function FormValidate(form)
  {
    if(IsStringEmpty(form.result_result1.value))
    {
      return false;
    }
    if(IsStringEmpty(form.result_result2.value))
    {
      return false;
    }
    return true;
  }
</script>